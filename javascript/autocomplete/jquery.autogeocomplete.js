(function(e){var t;var n;var r;var s=false;var o;var u;var a;var f;var l;var c;var h;var p;e.fn.extend({autogeocomplete:function(d){function v(t,i){e("#"+a).val(t);e("#"+f).val(i);map_location=new google.maps.LatLng(t,i);r.setPosition(map_location);n.setCenter(map_location)}d=e.extend({},e.fn.autogeocomplete.defaults,d);u=d.map_window_id;o=d.map_frame_id;a=d.lat_id;f=d.lng_id;l=d.addr_id;c=d.lat;h=d.lng;p=d.map_zoom;this.initialize();t=new google.maps.Geocoder;this.autocomplete({source:function(n,r){t.geocode({address:n.term},function(t,n){var o=0;var u=[];if(s){e.each(t,function(e){if(t[e].formatted_address.toLowerCase().indexOf(", usa")!==-1){u.push(t[e])}})}else{u=t}v(u[0].geometry.location.lat(),u[0].geometry.location.lng());r(e.map(u,function(e){var t=e.formatted_address.split(",");var n=t[0];var r="";for(i=1;i<t.length;i++){r+=t[i];if(i!==t.length-1)r+=","}if(o<5){o++;return{label:n,value:e.formatted_address,desc:r,latitude:e.geometry.location.lat(),longitude:e.geometry.location.lng()}}}))})},minLength:4,select:function(t,n){e("#"+a).val(n.item.latitude);e("#"+f).val(n.item.longitude)},open:function(t,n){e("#"+o).css("visibility","visible");e("#"+o).css("z-index","5");e("#"+u).css("z-index","5");e(".ui-autocomplete").css("z-index","-1");e(".ui-menu-item").css("width","200px")},close:function(t,n){e("#"+o).css("visibility","visible")},focus:function(e,t){v(t.item.latitude,t.item.longitude)}}).data("autocomplete")._renderItem=function(t,n){return e("<li></li>").data("item.autocomplete",n).append("<a><strong>"+n.label+"</strong><br>"+n.desc+"</a>").appendTo(t)}},initialize:function(){var t=new google.maps.LatLng(c,h);var i={zoom:p,center:t,mapTypeId:google.maps.MapTypeId.ROADMAP,scaleControl:false,mapTypeControl:false};n=new google.maps.Map(document.getElementById(u),i);r=new google.maps.Marker({map:n,draggable:false});google.maps.event.addListener(n,"click",function(t){e("#"+a).val(t.latLng.b);e("#"+f).val(t.latLng.c);var r=t.latLng;var i=new google.maps.Marker({map:n,draggable:false,position:r});var s=new google.maps.Geocoder;s.geocode({latLng:t.latLng},function(t,n){e("#"+l).val(t[0].formatted_address)})})}});e.fn.autogeocomplete.defaults={map_frame_id:"mapframe",map_window_id:"mapwindow",lat_id:"filter_lat",lng_id:"filter_lng",addr_id:"filter_address",lat:"37.7749295",lng:"-122.4194155",map_zoom:13}})(jQuery)